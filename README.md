# nest-utils

## Description

Contains cross-project commonly used NestJS code like postgres naming strategy, nest decorators, and pipes.

## Requirements

Make sure to have the following installed

* `NodeJS / NPM` for application runtime
* `NestJS` for application framework

## Installation

To use the `nest-utils` node module:

```bash
$ npm install --save @sierralabs/nest-utils
```

or with yarn

```bash
$ yar add @sierralabs/nest-utils
```

## Postgres Naming Strategy

TypeORM by default retains camelCase naming convention for table and column names. Also, constraints, relations, primary keys, and foreign key names generated by TypeORM do not follow industry best practices. The `PostgresNamingStrategy` overrides TypeORM's default naming strategy.

To use, modify the NestJS module imports to include the `namingStrategy` property:

```javascript
TypeOrmModule.forRoot({
  ...
  namingStrategy: new PostgresNamingStrategy()
});
```

## Config Module based on ConvictJS

The Config module provides a standard environment specific Config Service to access environment variables. See [README here](src/config/README.md) for more details on setup and configuration.


## NestJS Pipes

* `ParseBooleanPipe` - used to parse boolean query string params
* `RequiredPipe` - Enforced a required query string param
* `ParseEntity` - uses the class-transformer library to convert a JSON body to an TypeORM Entity class instance

## Contributing

To contribute to the `nest-utils` project please make sure to have the following configured in your development environment. Submit pull request to master after making sure all unit tests run successful.

* `tslint` for TypeScript linting (tslint in VSCode to automate linting)
* `jest` for unit testing

### Development environment setup

```bash
$ npm install
```

If you would like to develop/debug `nest-utils` in your source project you can npm link to symlink cross-dependency:

```bash
# Run npm link on this project
$ npm link

# Run npm link on your project
$ npm link @sierralabs/nest-utils
```

### Test

All code changes should have supported unit tests.

```bash
# unit tests
$ npm run test

# test coverage
$ npm run test:cov
```

